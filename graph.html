<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/graph.css">
    <title>EAST</title>
    <script src="/plugins/chartjs/chart.js"></script>
    <script src="/plugins/chartjs/annotation1.0.2.js"></script>
</head>

<body>
    <!-- 전체 -->
    <div class="wrapper">
        <!-- 사이드바 -->
        <div class="side_bar">
            <div class="logo" onclick="window.location.href='/index.html'">
                <img src="/img/logo.png" alt="">
                <div class="logo_text">EAST COMPANY</div>
            </div>
            <div class="menu">
                <div class="menu_item" onclick="window.location.href='/index.html'">
                    <div class="menu_path"></div>
                    <svg width="26" height="26" viewBox="0 0 26 26">
                        <path id="main_page" data-name="main page" d="M15.422,14.556a1.445,1.445,0,0,0-1.444-1.444H4.444A1.445,1.445,0,0,0,3,14.556v13A1.445,1.445,0,0,0,4.444,29h9.533a1.445,1.445,0,0,0,1.444-1.444ZM29,23.222a1.445,1.445,0,0,0-1.444-1.444H18.889a1.487,1.487,0,0,0-1.444,1.444v4.333A1.445,1.445,0,0,0,18.889,29h8.667A1.445,1.445,0,0,0,29,27.556Zm-2.167.722v2.889H19.611V23.944ZM13.256,15.278V26.833H5.167V15.278ZM29,4.444A1.445,1.445,0,0,0,27.556,3H18.889a1.445,1.445,0,0,0-1.444,1.444V18.311a1.445,1.445,0,0,0,1.444,1.444h8.667A1.445,1.445,0,0,0,29,18.311Zm-2.167.722V17.589H19.611V5.167ZM15.422,4.444A1.445,1.445,0,0,0,13.978,3H4.444A1.445,1.445,0,0,0,3,4.444v5.2a1.445,1.445,0,0,0,1.444,1.444h9.533a1.445,1.445,0,0,0,1.444-1.444v-5.2Zm-2.167.722V8.922H5.167V5.167Z" transform="translate(-3 -3)" fill="#ddddde" />
                    </svg>
                </div>
                <div class="menu_item active" onclick="window.location.href='/graph.html'">
                    <div class="menu_path"></div>
                    <svg width="26" height="24" viewBox="0 0 26 24">
                        <path id="graph_page" data-name="graph page" d="M5.417,9.727v8.727H3.25V9.727ZM7.583,7.545h-6.5V20.636h6.5Zm6.5-4.364V18.455H11.917V3.182ZM16.25,1H9.75V20.636h6.5Zm6.5,14.182v3.273H20.583V15.182ZM24.917,13h-6.5v7.636h6.5ZM26,22.818H0V25H26Z" transform="translate(0 -1)" fill="#ddddde" />
                    </svg>
                </div>
                <div class="menu_item" onclick="window.location.href='/tracking.html'">
                    <div class="menu_path"></div>
                    <svg width="26" height="26" viewBox="0 0 26 26">
                        <path id="iconmonstr-share-2" d="M5.417,9.75A3.25,3.25,0,1,1,2.167,13,3.254,3.254,0,0,1,5.417,9.75Zm0-2.167A5.417,5.417,0,1,0,10.833,13,5.417,5.417,0,0,0,5.417,7.583Zm16.25,9.75a4.305,4.305,0,0,0-3.18,1.409l-5.945-3.171a7.523,7.523,0,0,1-1.023,1.911l5.945,3.171a4.327,4.327,0,1,0,4.2-3.32Zm0,6.5a2.167,2.167,0,1,1,2.167-2.167A2.169,2.169,0,0,1,21.667,23.833ZM21.667,0a4.334,4.334,0,0,0-4.333,4.333,4.331,4.331,0,0,0,.131,1.013L11.519,8.517a7.576,7.576,0,0,1,1.023,1.911l5.945-3.171A4.328,4.328,0,1,0,21.667,0Zm0,6.5a2.167,2.167,0,1,1,2.167-2.167A2.169,2.169,0,0,1,21.667,6.5Z" fill="#ddddde" />
                    </svg>
                </div>
                <div class="menu_item" onclick="window.location.href='/dayily.html'">
                    <div class="menu_path"></div>
                    <svg width="26" height="26" viewBox="0 0 26 26">
                        <path id="daily_page" data-name="daily page" d="M26,26H5.667a1,1,0,0,0,0,2h21A1.372,1.372,0,0,0,28,26.665v-21a1,1,0,0,0-2,0ZM24.667,3.331A1.336,1.336,0,0,0,23.333,2h-20A1.334,1.334,0,0,0,2,3.331v20a1.334,1.334,0,0,0,1.333,1.333h20a1.336,1.336,0,0,0,1.333-1.333Zm-2,6V22.665H4V9.331Zm0-2H4V4H22.667Z" transform="translate(-2 -1.998)" fill="#ddddde" />
                    </svg>
                </div>
                <div class="menu_item" onclick="window.location.href='/index.html'">
                    <div class="menu_path"></div>
                    <svg width="26" height="23" viewBox="0 0 26 23">
                        <path id="month_page" data-name="month page" d="M23.958,24.081H6.042L4.066,11.941H25.935ZM5.36,8.1H24.689l-.3,1.924H5.654ZM6.651,4.915H23.4l-.169,1.256H6.819ZM28,11.3a1.289,1.289,0,0,0-1.3-1.275h-.329c.4-2.637.376-2.442.376-2.567a1.292,1.292,0,0,0-1.3-1.288H25.2c.251-1.867.243-1.788.243-1.894A1.292,1.292,0,0,0,24.14,3H5.909a1.291,1.291,0,0,0-1.3,1.278c0,.106-.01.017.244,1.895H4.605A1.294,1.294,0,0,0,3.3,7.457c0,.129-.021-.034.377,2.568H3.3A1.289,1.289,0,0,0,2,11.3c0,.151-.136-.744,2.2,13.62A1.292,1.292,0,0,0,5.488,26H24.513A1.292,1.292,0,0,0,25.8,24.922C28.139,10.547,28,11.454,28,11.3Z" transform="translate(-2 -2.998)" fill="#ddddde" />
                    </svg>
                </div>
                <div class="menu_item" onclick="window.location.href='/data.html'">
                    <div class="menu_path"></div>
                    <svg width="26" height="24" viewBox="0 0 26 24">
                        <path id="data_page" data-name="data page" d="M21.4,21.914a5.364,5.364,0,0,1-2.987.9,5.442,5.442,0,1,1,4.519-2.447L26,23.457,24.468,25Zm-8.292.9H0V1H7.583c1.836,2.119,2.569,3.273,4.333,3.273H23.833v7.749a7.594,7.594,0,0,0-2.167-1.558V6.455h-9.75c-2.534,0-3.832-1.514-5.327-3.273H2.167V20.636h9.4A7.645,7.645,0,0,0,13.112,22.818Zm5.305-8.727a3.273,3.273,0,1,1-3.25,3.273A3.263,3.263,0,0,1,18.417,14.091Z" transform="translate(0 -1)" fill="#ddddde" fill-rule="evenodd" />
                    </svg>
                </div>
            </div>
        </div>
        <!-- /사이드바 -->
        <div class="content">
            <div class="row">
                <div class="graph_title">Sub Front</div>
                <div class="graph">
                    <div class="graph_item">
                        <div class="position">S02</div>
                        <div class="name">너트 용접</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart1_1"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position">S04</div>
                        <div class="name">너트 용접</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart1_2"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position">S06</div>
                        <div class="name">볼트 용접</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart1_3"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position">S07</div>
                        <div class="name">탭 검사</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart1_4"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position">S08</div>
                        <div class="name">스팟 용접</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart1_5"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position none_color">NONE</div>
                        <div class="name"></div>
                        <div class="inner">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="graph_title">Sub Rear</div>
                <div class="graph">
                    <div class="graph_item">
                        <div class="position">S02</div>
                        <div class="name">너트 용접</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart2_1"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position">S04</div>
                        <div class="name">너트 용접</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart2_2"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position">S06</div>
                        <div class="name">볼트 용접</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart2_3"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position">S07</div>
                        <div class="name">탭 검사</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart2_4"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position">S08</div>
                        <div class="name">스팟 용접</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart2_5"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position none_color">NONE</div>
                        <div class="name"></div>
                        <div class="inner">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="graph_title">메인 Line</div>
                <div class="graph">
                    <div class="graph_item">
                        <div class="position">S02</div>
                        <div class="name">너트 용접</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart3_1"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position">S04</div>
                        <div class="name">너트 용접</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart3_2"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position">S06</div>
                        <div class="name">볼트 용접</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart3_3"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position">S07</div>
                        <div class="name">탭 검사</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart3_4"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position">S08</div>
                        <div class="name">스팟 용접</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart3_5"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position">W04</div>
                        <div class="name">비전 검사</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart3_6"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="graph_title">조립 Line</div>
                <div class="graph">
                    <div class="graph_item">
                        <div class="position">S02</div>
                        <div class="name">너트 용접</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart4_1"></canvas>
                        </div>
                    </div>
                    <div class="graph_item">
                        <div class="position">S04</div>
                        <div class="name">너트 용접</div>
                        <div class="inner">
                            <canvas class="myChart" id="myChart4_2"></canvas>
                        </div>
                    </div>
                    <div class="info_item">
                        <div class="info_top">
                            <div class="info_title">시간당 생산량</div>
                            <div class="info_part">주간</div>
                        </div>
                        <div class="info_bottom">
                            <div class="info_left">
                                <div class="left_title">총 생산 개수</div>
                                <div class="left_count">0개</div>
                            </div>
                            <div class="info_right">
                                <div class="right_title">시간당 생산 개수</div>
                                <div class="right_count">0개</div>
                            </div>
                        </div>
                    </div>
                    <div class="info_item">
                        <div class="info_top">
                            <div class="info_title">공정 불량률</div>
                            <div class="info_part">주간</div>
                        </div>
                        <div class="info_bottom">
                            <div class="info_left">
                                <div class="left_title">주간 시간당 불량 개수</div>
                                <div class="left_count">0개</div>
                            </div>
                            <div class="info_right">
                                <div class="right_title">주간 불량 퍼센트</div>
                                <div class="right_count">0.00%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /전체 -->
    <script src="/plugins/jquery/jquery.min.js"></script>

    <script>
        $(document).ready(function() {
            updateData();
        });

        var ctx1 = [];
        var set1 = [];
        var option1 = [];
        var myChart1 = [];
        var array1 = []; //1번째 행
        var min1 = [];
        var max1 = [];
        var MinValues1 = [];
        var MaxValues1 = [];

        var ctx2 = [];
        var set2 = [];
        var option2 = [];
        var myChart2 = [];
        var array2 = []; //2번째 행

        var ctx3 = [];
        var set3 = [];
        var option3 = [];
        var myChart3 = [];
        var array3 = []; //3번째 행

        var ctx4 = [];
        var set4 = [];
        var option4 = [];
        var myChart4 = [];
        var array4 = []; //4번째 행
        // 차트 데이터와 옵션 정의
        // var maxValues = {};
        // var minValues = {};
        // var adjustedMaxValues = {};
        // var adjustedMinValues = {};


        /////////////////////////기능 분리하자!!

        //불러온 데이터 배열을 보내는 곳!! 데이터만 보내자
        function updateData() {

            $.ajax({
                url: "/get/get_graph1.php",
                type: "post",
                cache: false,
                success: function(data1) {
                    array1 = JSON.parse(data1);
                }
            });

            $.ajax({
                url: "/get/get_graph2.php",
                type: "post",
                cache: false,
                success: function(data2) {
                    array2 = JSON.parse(data2);
                }
            });

            $.ajax({
                url: "/get/get_graph3.php",
                type: "post",
                cache: false,
                success: function(data3) {
                    array3 = JSON.parse(data3);
                }
            });

            $.ajax({
                url: "/get/get_graph4.php",
                type: "post",
                cache: false,
                success: function(data4) {
                    array4 = JSON.parse(data4);
                }
            });

            //함수가 존재하는지 판별 후 실행 (예외처리)
            if (typeof updateChart1 === 'function') {
                updateChart1(array1);
            }
            if (typeof updateChart2 === 'function') {
                updateChart2(array2);
            }
            if (typeof updateChart3 === 'function') {
                updateChart3(array3);
            }
            if (typeof updateChart4 === 'function') {
                updateChart4(array4);
            }

            timerID = setTimeout("updateData()", 1000); // 1초 단위로 갱신 처리
        }

        //1번째 행 데이터 배열을 받아와서 배치 해주자!!
        function updateChart1(array1) {
            for (num1 = 1; num1 <= 5; num1++) {
            //     min1[num1 - 1] = Math.min(...array1[num1 - 1]);
            // max1[num1 - 1] = Math.max(...array1[num1 - 1]);

            // // 최댓값과 최솟값에 여유를 두어 조정
            // MinValues1[num1 - 1] = min1[num1 - 1] - 10;
            // MaxValues1[num1 - 1] = max1[num1 - 1] + 10;

            // console.log(array1);

                ctx1[num1 - 1] = document.getElementById(`myChart1_${num1}`).getContext('2d');

                set1[num1 - 1] = {
                    labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10'],
                    datasets: [{
                        label: '데이터',
                        data: array1[num1 - 1],
                        backgroundColor: 'transparent',
                        borderColor: 'rgb(51, 225, 239)',
                        borderWidth: 2,
                        fill: 'start',
                        pointRadius: 0, // 점 숨기기
                        // tension: 0.4
                    }]
                };

                option1[num1 - 1] = {
                    responsive: true,
                    scales: {
                        y: {
                            display: false,
                            grid: {
                                display: false, // 세로축의 눈금선 숨기기
                                drawOnChartArea: false, // 차트 영역 내부에만 눈금선 그리기
                            },
                            ticks: {
                                font: {
                                    size: 7 // 폰트 크기 설정
                                }
                            }
                        },
                        x: {
                            display: false,
                            grid: {
                                display: false, // 세로축의 눈금선 숨기기
                            },
                            // display: false,  // 세로축 눈금 숨기기
                            ticks: {
                                font: {
                                    size: 7 // 폰트 크기 설정
                                }
                            }
                        }
                    },
                    plugins: {
                        annotation: {
                            annotations: {
                                upperLine: { // 상한선 설정
                                    type: 'line',
                                    yMin: 500, // 상한선의 값
                                    yMax: 500, // 이 값이 같으면 수평선이 됩니다.
                                    borderColor: 'rgb(255, 99, 132)', // 선의 색상
                                    borderWidth: 1, // 선의 두께
                                },
                                lowerLine: { // 하한선 설정
                                    type: 'line',
                                    yMin: 0, // 하한선의 값
                                    yMax: 0, // 이 값이 같으면 수평선이 됩니다.
                                    borderColor: 'rgb(54, 162, 235)', // 선의 색상
                                    borderWidth: 1, // 선의 두께
                                }
                            }
                        },
                        tooltip: {
                            enabled: true, // 툴팁 활성화
                            mode: 'nearest', // 툴팁 모드 설정
                            intersect: false, // 교차점에만 툴팁 표시 여부 설정
                            callbacks: { // 툴팁 내용 커스터마이징
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    label += context.parsed.y;
                                    return label;
                                }
                            }
                        },
                        legend: {
                            display: false
                        }
                    },
                    animation: {
                        duration: 0 // 애니메이션 지속 시간을 0으로 설정하여 애니메이션 비활성화
                    }
                };

                if (myChart1[num1 - 1]) {
                    // 차트가 이미 존재하면 업데이트
                    myChart1[num1 - 1].data = set1[num1 - 1];
                    myChart1[num1 - 1].options = option1[num1 - 1];
                    myChart1[num1 - 1].update();
                } else {
                    // 차트가 존재하지 않으면 새로 생성
                    myChart1[num1 - 1] = new Chart(ctx1[num1 - 1], {
                        type: 'line',
                        data: set1[num1 - 1],
                        options: option1[num1 - 1]
                    });
                }
            }
        }

        function updateChart2(array2) {
            for (num2 = 1; num2 <= 5; num2++) {
                ctx2[num2 - 1] = document.getElementById(`myChart2_${num2}`).getContext('2d');

                set2[num2 - 1] = {
                    labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10'],
                    datasets: [{
                        label: '데이터',
                        data: array2[num2 - 1],
                        backgroundColor: 'transparent',
                        borderColor: 'rgb(51, 225, 239)',
                        borderWidth: 2,
                        fill: 'start',
                        pointRadius: 0, // 점 숨기기
                        // tension: 0.4
                    }]
                };

                option2[num2 - 1] = {
                    responsive: true,
                    scales: {
                        y: {
                            display: false,
                            min: 0, // 계산된 최솟값으로 설정
                            max: 500, // 계산된 최댓값으로 설정
                            grid: {
                                display: false, // 세로축의 눈금선 숨기기
                                drawOnChartArea: false, // 차트 영역 내부에만 눈금선 그리기
                            },
                            ticks: {
                                font: {
                                    size: 7 // 폰트 크기 설정
                                }
                            }
                        },
                        x: {
                            display: false,
                            grid: {
                                display: false, // 세로축의 눈금선 숨기기
                            },
                            // display: false,  // 세로축 눈금 숨기기
                            ticks: {
                                font: {
                                    size: 7 // 폰트 크기 설정
                                }
                            }
                        }
                    },
                    plugins: {
                        annotation: {
                            annotations: {
                                upperLine: { // 상한선 설정
                                    type: 'line',
                                    yMin: 80, // 상한선의 값
                                    yMax: 80, // 이 값이 같으면 수평선이 됩니다.
                                    borderColor: 'rgb(255, 99, 132)', // 선의 색상
                                    borderWidth: 1, // 선의 두께
                                },
                                lowerLine: { // 하한선 설정
                                    type: 'line',
                                    yMin: 20, // 하한선의 값
                                    yMax: 20, // 이 값이 같으면 수평선이 됩니다.
                                    borderColor: 'rgb(54, 162, 235)', // 선의 색상
                                    borderWidth: 1, // 선의 두께
                                }
                            }
                        },
                        tooltip: {
                            enabled: true, // 툴팁 활성화
                            mode: 'nearest', // 툴팁 모드 설정
                            intersect: false, // 교차점에만 툴팁 표시 여부 설정
                            callbacks: { // 툴팁 내용 커스터마이징
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    label += context.parsed.y;
                                    return label;
                                }
                            }
                        },
                        legend: {
                            display: false
                        }
                    },
                    animation: {
                        duration: 0 // 애니메이션 지속 시간을 0으로 설정하여 애니메이션 비활성화
                    }
                };

                if (myChart2[num2 - 1]) {
                    // 차트가 이미 존재하면 업데이트
                    myChart2[num2 - 1].data = set2[num2 - 1];
                    myChart2[num2 - 1].options = option2[num2 - 1];
                    myChart2[num2 - 1].update();
                } else {
                    // 차트가 존재하지 않으면 새로 생성
                    myChart2[num2 - 1] = new Chart(ctx2[num2 - 1], {
                        type: 'line',
                        data: set2[num2 - 1],
                        options: option2[num2 - 1]
                    });
                }
            }
            // console.log(array1);
        }

        function updateChart3(array3) {
            for (num3 = 1; num3 <= 6; num3++) {
                ctx3[num3 - 1] = document.getElementById(`myChart3_${num3}`).getContext('2d');

                set3[num3 - 1] = {
                    labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10'],
                    datasets: [{
                        label: '데이터',
                        data: array3[num3 - 1],
                        backgroundColor: 'transparent',
                        borderColor: 'rgb(51, 225, 239)',
                        borderWidth: 2,
                        fill: 'start',
                        pointRadius: 0, // 점 숨기기
                        // tension: 0.4
                    }]
                };

                option3[num3 - 1] = {
                    responsive: true,
                    scales: {
                        y: {
                            display: false,
                            min: 0, // 계산된 최솟값으로 설정
                            max: 500, // 계산된 최댓값으로 설정
                            grid: {
                                display: false, // 세로축의 눈금선 숨기기
                                drawOnChartArea: false, // 차트 영역 내부에만 눈금선 그리기
                            },
                            ticks: {
                                font: {
                                    size: 7 // 폰트 크기 설정
                                }
                            }
                        },
                        x: {
                            display: false,
                            grid: {
                                display: false, // 세로축의 눈금선 숨기기
                            },
                            // display: false,  // 세로축 눈금 숨기기
                            ticks: {
                                font: {
                                    size: 7 // 폰트 크기 설정
                                }
                            }
                        }
                    },
                    plugins: {
                        annotation: {
                            annotations: {
                                upperLine: { // 상한선 설정
                                    type: 'line',
                                    yMin: 80, // 상한선의 값
                                    yMax: 80, // 이 값이 같으면 수평선이 됩니다.
                                    borderColor: 'rgb(255, 99, 132)', // 선의 색상
                                    borderWidth: 1, // 선의 두께
                                },
                                lowerLine: { // 하한선 설정
                                    type: 'line',
                                    yMin: 20, // 하한선의 값
                                    yMax: 20, // 이 값이 같으면 수평선이 됩니다.
                                    borderColor: 'rgb(54, 162, 235)', // 선의 색상
                                    borderWidth: 1, // 선의 두께
                                }
                            }
                        },
                        tooltip: {
                            enabled: true, // 툴팁 활성화
                            mode: 'nearest', // 툴팁 모드 설정
                            intersect: false, // 교차점에만 툴팁 표시 여부 설정
                            callbacks: { // 툴팁 내용 커스터마이징
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    label += context.parsed.y;
                                    return label;
                                }
                            }
                        },
                        legend: {
                            display: false
                        }
                    },
                    animation: {
                        duration: 0 // 애니메이션 지속 시간을 0으로 설정하여 애니메이션 비활성화
                    }
                };

                if (myChart3[num3 - 1]) {
                    // 차트가 이미 존재하면 업데이트
                    myChart3[num3 - 1].data = set3[num3 - 1];
                    myChart3[num3 - 1].options = option3[num3 - 1];
                    myChart3[num3 - 1].update();
                } else {
                    // 차트가 존재하지 않으면 새로 생성
                    myChart3[num3 - 1] = new Chart(ctx3[num3 - 1], {
                        type: 'line',
                        data: set3[num3 - 1],
                        options: option3[num3 - 1]
                    });
                }
            }
            // console.log(array1);
        }

        function updateChart4(array4) {
            for (num4 = 1; num4 <= 2; num4++) {
                ctx4[num4 - 1] = document.getElementById(`myChart4_${num4}`).getContext('2d');

                set4[num4 - 1] = {
                    labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10'],
                    datasets: [{
                        label: '데이터',
                        data: array4[num4 - 1],
                        backgroundColor: 'transparent',
                        borderColor: 'rgb(51, 225, 239)',
                        borderWidth: 2,
                        fill: 'start',
                        pointRadius: 0, // 점 숨기기
                        // tension: 0.4
                    }]
                };

                option4[num4 - 1] = {
                    responsive: true,
                    scales: {
                        y: {
                            display: false,
                            min: 0, // 계산된 최솟값으로 설정
                            max: 500, // 계산된 최댓값으로 설정
                            grid: {
                                display: false, // 세로축의 눈금선 숨기기
                                drawOnChartArea: false, // 차트 영역 내부에만 눈금선 그리기
                            },
                            ticks: {
                                font: {
                                    size: 7 // 폰트 크기 설정
                                }
                            }
                        },
                        x: {
                            display: false,
                            grid: {
                                display: false, // 세로축의 눈금선 숨기기
                            },
                            // display: false,  // 세로축 눈금 숨기기
                            ticks: {
                                font: {
                                    size: 7 // 폰트 크기 설정
                                }
                            }
                        }
                    },
                    plugins: {
                        annotation: {
                            annotations: {
                                upperLine: { // 상한선 설정
                                    type: 'line',
                                    yMin: 80, // 상한선의 값
                                    yMax: 80, // 이 값이 같으면 수평선이 됩니다.
                                    borderColor: 'rgb(255, 99, 132)', // 선의 색상
                                    borderWidth: 1, // 선의 두께
                                },
                                lowerLine: { // 하한선 설정
                                    type: 'line',
                                    yMin: 20, // 하한선의 값
                                    yMax: 20, // 이 값이 같으면 수평선이 됩니다.
                                    borderColor: 'rgb(54, 162, 235)', // 선의 색상
                                    borderWidth: 1, // 선의 두께
                                }
                            }
                        },
                        tooltip: {
                            enabled: true, // 툴팁 활성화
                            mode: 'nearest', // 툴팁 모드 설정
                            intersect: false, // 교차점에만 툴팁 표시 여부 설정
                            callbacks: { // 툴팁 내용 커스터마이징
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    label += context.parsed.y;
                                    return label;
                                }
                            }
                        },
                        legend: {
                            display: false
                        }
                    },
                    animation: {
                        duration: 0 // 애니메이션 지속 시간을 0으로 설정하여 애니메이션 비활성화
                    }
                };

                if (myChart4[num4 - 1]) {
                    // 차트가 이미 존재하면 업데이트
                    myChart4[num4 - 1].data = set4[num4 - 1];
                    myChart4[num4 - 1].options = option4[num4 - 1];
                    myChart4[num4 - 1].update();
                } else {
                    // 차트가 존재하지 않으면 새로 생성
                    myChart4[num4 - 1] = new Chart(ctx4[num4 - 1], {
                        type: 'line',
                        data: set4[num4 - 1],
                        options: option4[num4 - 1]
                    });
                }
            }
            // console.log(array1);
        }
    </script>
</body>

</html>